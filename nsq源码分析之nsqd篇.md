# nsq源码分析之nsqd篇

## 目录
1. [名词解释](#名词解释)
2. [架构设计](#架构设计)
3. [rdy机制](#rdy机制)
4. [一条消息的旅程](#一条消息的旅程)
5. [存储设计](#存储设计)
6. [延迟队列设计](#延迟队列设计)  
    5.1 [时间轮](#时间轮)  
    5.2 [最小堆](#最小堆)
7. [可伸缩的携程池](#可伸缩的携程池)
8. [小结](#小结)
### 名词解释
+ topic：消息分组，一个topic既为一个消息分组，一个消息分组内可以包含多个频道。
+ channel：频道，在topic内部实现的逻辑概念。用户订阅topic实际上订阅的topic内部的频道。当topic接受client发布的消息后，会定位所在topic然后把消息下发给topic内部所有的channel。
+ rdy：nsq采用的消息推送方式。nsq并非直接的服务器推模型。客户端开始接收消息时会告知服务器想要接收的消息数量，然后服务器根据此参数定向推送特定数据给该client。
+ flight：在nsq中凡是推送到客户端的且未被finished的msg在nsqd中被记作fligth。读者朋友阅读源码时当看到flight就要明白这条msg还没有被finished。

### 架构设计
